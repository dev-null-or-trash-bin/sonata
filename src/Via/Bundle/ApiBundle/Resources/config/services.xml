<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    
    <parameters>
         <parameter key="via_api.admin.product.class">Via\Bundle\ApiBundle\Admin\ProductAdmin</parameter>      
         <parameter key="via_api.admin.extension.product.class">Via\Bundle\ApiBundle\Admin\Extension\ProductAdminExtension</parameter>
         <parameter key="via_api.listener.product_batch_confirmation.class">Via\Bundle\ApiBundle\EventListener\ProductBatchConfirmationListener</parameter>
    </parameters>

	<services>
		<!-- 
			Override via_product.admin.product.class
		 -->
	    <service id="via_api.admin.product" class="%via_api.admin.product.class%">
	      <tag name="sonata.admin" 
	      		manager_type="orm" 
	      		group="Content" 
	      		label="via_api.admin.dashboard.api" 
	      		target="via.product.admin.product" 
	      		show_in_dashboard="false"
	      />
	      <argument />
	      <argument>%via.product.entity.product.class%</argument>
	      <argument>ViaApiBundle:ProductAdmin</argument>
	      <call method="setTemplate">
	          <argument>list</argument>
	          <argument>ViaApiBundle:CRUD:base_list.html.twig</argument>
	      </call>
	      <!-- call method="setTemplate">
	          <argument>batch_confirmation</argument>
	          <argument>ViaApiBundle:CRUD:batch_confirmation.html.twig</argument>
	      </call -->
	      <!-- call method="setTemplate">
	          <argument>layout</argument>
	          <argument>ViaApiBundle::standard_layout.html.twig</argument>
	      </call -->
	  	</service>	  	
	  	
	    <service id="via_api.admin.extension.product" class="%via_api.admin.extension.product.class%">
	    	<tag name="sonata.admin.extension" target="via_api.admin.product" />
	    	<argument type="service" id="event_dispatcher" />
	    </service>
	  	
	  	<service id="via_api.listener.product_batch_confirmation" class="%via_api.listener.product_batch_confirmation.class%">            
            <tag name="kernel.event_listener" event="via.product.batch.confirmation" method="onProductBatchConfrmation" />            
        </service>
	  	
	 </services>
  
</container>
